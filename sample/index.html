<!DOCTYPE html>
<html>
    <head>
		<meta charset="utf-8" />
        <title>ZarinPal Sample</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="css/index.css">
		<script type="text/javascript" src="cordova.js"></script>
    </head>
    <body>
		<script>
			document.addEventListener("deviceready", function () {
				var parentElement = document.getElementById("deviceready");
				var listeningElement = parentElement.querySelector('.listening');
				var receivedElement = parentElement.querySelector('.received');

				listeningElement.setAttribute('style', 'display:none;');
				receivedElement.setAttribute('style', 'display:block;');
				
				console.log('Device is Ready');
				
				window.ZarinPal.initialize("a281ee7a-9ae4-11e7-a04d-005056a205be", true, function(result) {console.log("Initialize success");});
				
				document.addEventListener("resume", onResume, false);
				
			}, false);
			
			function onResume() {
				window.ZarinPal.verificationPayment(function(result) {console.log(result.Success);}, function(error) {console.log(error);});
			}
		</script>
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
            <button onclick="window.ZarinPal.startPayment(true, 2000, 'Test Payment', 'rezagah.milad@gmail.com', '09369970998', function(result) {console.log(result);});">Auto Buy</button>
            <button onclick="window.ZarinPal.startPayment(false, 2000, 'Test Payment', 'rezagah.milad@gmail.com', '09369970998', function(result) {console.log(result);});">Manual Buy</button>
            <button onclick="window.ZarinPal.showPayment(function(result) {console.log(result);}, function(error) {console.log(error);});">Show Payment Page</button>
        </div>
    </body>
</html>
